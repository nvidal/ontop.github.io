(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{237:function(t,e,a){"use strict";a.r(e);var s=a(0),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"ontop-with-denodo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ontop-with-denodo"}},[t._v("#")]),t._v(" Ontop with Denodo")]),t._v(" "),a("p",[t._v("NB: You might also consult the following presentation, which shows screenshots for\nsome of the steps described below:"),a("br"),t._v(" "),a("a",{attrs:{href:"https://github.com/ontop/ontop-examples/blob/master/cikm-2018-tutorial/4-obdi-demo.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/ontop/ontop-examples/blob/master/cikm-2018-tutorial/4-obdi-demo.pdf"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"_1-set-up-denodo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-set-up-denodo"}},[t._v("#")]),t._v(" 1. Set up Denodo.")]),t._v(" "),a("h4",{attrs:{id:"download-denodo-express"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#download-denodo-express"}},[t._v("#")]),t._v(" Download Denodo Express")]),t._v(" "),a("p",[t._v("Download it from "),a("a",{attrs:{href:"https://www.denodo.com/en/denodo-platform/denodo-express",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.denodo.com/en/denodo-platform/denodo-express"),a("OutboundLink")],1),t._v(" "),a("br"),t._v("\n(register, download the platform and the licence file)")]),t._v(" "),a("p",[t._v("Unzip the file and run the installer.")]),t._v(" "),a("p",[t._v("Note: environment variable "),a("code",[t._v("JAVA_HOME")]),t._v(" must be set")]),t._v(" "),a("h4",{attrs:{id:"running-denodo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#running-denodo"}},[t._v("#")]),t._v(" Running Denodo")]),t._v(" "),a("div",{staticClass:"language-console extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("/Applications/DenodoPlatform7.0/bin/DenodoPlatform.sh\n")])])]),a("ul",[a("li",[t._v("Select 'Virtual DataPort' tab")]),t._v(" "),a("li",[t._v("Start 'Virtual DataPort Server'")]),t._v(" "),a("li",[t._v("Press 'LAUNCH' button")]),t._v(" "),a("li",[t._v("Login with 'admin' 'admin'")])]),t._v(" "),a("h3",{attrs:{id:"_2-configure-datasets-in-denodo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-configure-datasets-in-denodo"}},[t._v("#")]),t._v(" 2. Configure datasets in Denodo")]),t._v(" "),a("p",[t._v("NB: instead of doing the following step by step, you can also load "),a("code",[t._v("bzopendata.sql")]),t._v(" directly to Denodo")]),t._v(" "),a("h4",{attrs:{id:"create-database"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-database"}},[t._v("#")]),t._v(" Create database")]),t._v(" "),a("p",[t._v("Administration -> Database Management -> New\nCall the database e.g. bzopendata (leave the rest to the defaults)")]),t._v(" "),a("p",[t._v("Right-clik bzopendata database -> New -> Data Source -> JSON\nData route 'HTTP Client' -> Configure button")]),t._v(" "),a("h4",{attrs:{id:"connect-datasources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#connect-datasources"}},[t._v("#")]),t._v(" Connect datasources")]),t._v(" "),a("p",[t._v("(press Save icon for each source)")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Weather Stations "),a("br"),t._v("\nname: stations "),a("br"),t._v("\nWeb API: "),a("a",{attrs:{href:"http://daten.buergernetz.bz.it/services/weather/station?categoryId=2&lang=de&format=json",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://daten.buergernetz.bz.it/services/weather/station?categoryId=2&lang=de&format=json"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[t._v("Sensor Data  "),a("br"),t._v("\nname: sensors "),a("br"),t._v("\nWeb API: "),a("a",{attrs:{href:"http://daten.buergernetz.bz.it/services/meteo/v1/sensors",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://daten.buergernetz.bz.it/services/meteo/v1/sensors"),a("OutboundLink")],1)])])]),t._v(" "),a("h3",{attrs:{id:"_3-configure-datasources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-configure-datasources"}},[t._v("#")]),t._v(" 3. Configure datasources")]),t._v(" "),a("p",[t._v("Open the datasources in a web browser to understand their structure.")]),t._v(" "),a("p",[t._v("For each datasource: Create base view")]),t._v(" "),a("ul",[a("li",[t._v("for stations: use default Tuple root")]),t._v(" "),a("li",[t._v("for sensors: use Tuple root: "),a("code",[t._v("/JSONFile/JSONArray")]),t._v(" (click on checkbox JSON root)")])]),t._v(" "),a("p",[t._v("For stations, try to run 'Execution panel' button, then Execute")]),t._v(" "),a("p",[t._v("We get only one result --\x3e We need to flatten the data:")]),t._v(" "),a("ul",[a("li",[t._v("Right click {}stations -> New -> flatten")]),t._v(" "),a("li",[t._v("Enlarge window with data")]),t._v(" "),a("li",[t._v("Right click features -> Flatten array 'features'")]),t._v(" "),a("li",[t._v("Save the result, which creates a new view f_stations")])]),t._v(" "),a("p",[t._v("Selection:")]),t._v(" "),a("ul",[a("li",[t._v("Right click f_stations -> New -> Selection")]),t._v(" "),a("li",[t._v("Select Output tab and specify what to keep in the output")]),t._v(" "),a("li",[t._v("Unfold properties and right-click each subfield and select 'Project field ...'")])]),t._v(" "),a("h3",{attrs:{id:"_4-configure-ontop-protege-to-use-a-denodo-datasource"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-configure-ontop-protege-to-use-a-denodo-datasource"}},[t._v("#")]),t._v(" 4. Configure Ontop-protege to use a Denodo datasource")]),t._v(" "),a("p",[t._v("Install the Denodo JDBC driver:")]),t._v(" "),a("ul",[a("li",[t._v("Protege -> Preferences -> JDBC Drivers tab -> Add")]),t._v(" "),a("li",[t._v("Description: Denodo")]),t._v(" "),a("li",[t._v("Class name: "),a("code",[t._v("com.denodo.vdp.jdbc.Driver")])]),t._v(" "),a("li",[t._v("Driver File (jar): browse to "),a("code",[t._v("/.../DenodoPlatform7.0/tools/client-drivers/jdbc/denodo-vdp-jdbcdriver.jar")])])]),t._v(" "),a("p",[t._v("For the connection in your Datasource manager use:")]),t._v(" "),a("ul",[a("li",[t._v("Connection url: "),a("code",[t._v("jdbc:vdb://localhost:9999/bzopendata")])]),t._v(" "),a("li",[t._v("Database Username: "),a("code",[t._v("admin")])]),t._v(" "),a("li",[t._v("Database Password: "),a("code",[t._v("admin")])]),t._v(" "),a("li",[t._v("Driver class: "),a("code",[t._v("com.denodo.vdp.jdbc.Driver")])])]),t._v(" "),a("h3",{attrs:{id:"_5-create-the-ontology-and-mapping-and-and-try-some-sparql-queries"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-create-the-ontology-and-mapping-and-and-try-some-sparql-queries"}},[t._v("#")]),t._v(" 5. Create the ontology and mapping and and try some SPARQL queries")]),t._v(" "),a("p",[t._v("You can use directly the files we have prepared")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(".\n├── bzweather.obda\n├── bzweather.owl\n├── bzweather.properties\n└── bzweather.q\n")])])]),a("h3",{attrs:{id:"_6-setup-a-sparql-endpoint-with-command-line-interface"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-setup-a-sparql-endpoint-with-command-line-interface"}},[t._v("#")]),t._v(" 6. Setup a SPARQL endpoint with Command Line Interface")]),t._v(" "),a("h4",{attrs:{id:"configure-ontop-cli"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-ontop-cli"}},[t._v("#")]),t._v(" Configure Ontop CLI")]),t._v(" "),a("p",[t._v("Add the JDBC denodo driver for the Ontop CLI:")]),t._v(" "),a("div",{staticClass:"language-console extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cp /.../DenodoPlatform7.0/tools/client-drivers/jdbc/denodo-vdp-jdbcdriver.jar\n/.../ontop-3.0.0-beta-3/jdbc\n")])])]),a("p",[t._v("Run the Ontop CLI:")]),t._v(" "),a("div",{staticClass:"language-console extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ontop endpoint -t bzweather.owl -m bzweather.obda -p bzweather.properties --cors-allowed-origins='*'\n")])])]),a("h4",{attrs:{id:"access-the-sparql-endpoint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#access-the-sparql-endpoint"}},[t._v("#")]),t._v(" Access the SPARQL endpoint")]),t._v(" "),a("p",[t._v("Open "),a("a",{attrs:{href:"http://localhost:8080/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:8080/"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("Run an example SPARQL query:")]),t._v(" "),a("div",{staticClass:"language-sparql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sparql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PREFIX")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[t._v("geo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("http://www.opengis.net/ont/geosparql#"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PREFIX")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[t._v("sosa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("http://www.w3.org/ns/sosa/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PREFIX")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("http://example.org/weather#"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" *\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?station")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),a("span",{pre:!0,attrs:{class:"token local-name"}},[t._v("WeatherStation")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[t._v("geo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),a("span",{pre:!0,attrs:{class:"token local-name"}},[t._v("asWKT")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?wkt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),a("span",{pre:!0,attrs:{class:"token local-name"}},[t._v("hasSensor")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?sensor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),a("span",{pre:!0,attrs:{class:"token local-name"}},[t._v("longitude")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?lon")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),a("span",{pre:!0,attrs:{class:"token local-name"}},[t._v("latitude")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?lat")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?sensor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[t._v("sosa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),a("span",{pre:!0,attrs:{class:"token local-name"}},[t._v("madeObservation")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?o")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?o")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[t._v("sosa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),a("span",{pre:!0,attrs:{class:"token local-name"}},[t._v("hasSimpleResult")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?wktLabel")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?o")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[t._v("sosa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),a("span",{pre:!0,attrs:{class:"token local-name"}},[t._v("resultTime")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?t")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("LIMIT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);